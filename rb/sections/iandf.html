<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Integrate and Fire Neuron</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="figure.js"></script><script type="text/javascript">
(function() {document.write('<scr' + 'ipt type="text/javascript" src="MathJax/MathJax.js?config=default"></scr' + 'ipt>');})();
</script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Integrate and Fire Neuron</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.History_of_the_.Integrate_and_.Fire_.Model%29" class="tocviewlink" data-pltdoc="x">History of the Integrate and Fire Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._sec~3aiandf%29" class="tocviewlink" data-pltdoc="x">The Integrate and Fire Equation</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Electronics_.Background%29" class="tocviewlink" data-pltdoc="x">Electronics Background</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Integrate_and_.Fire_.Neuron%29" class="tocsubseclink" data-pltdoc="x">Integrate and Fire Neuron</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.History_of_the_.Integrate_and_.Fire_.Model%29" class="tocsubseclink" data-pltdoc="x">History of the Integrate and Fire Model</a></td></tr><tr><td><span class="tocsublinknumber">1.1<tt>&nbsp;</tt></span><a href="#%28part._.Louis_.Lapicque_-_.Earlier_.Computational_.Neuroscientist%29" class="tocsubseclink" data-pltdoc="x">Louis Lapicque -<wbr></wbr> Earlier Computational Neuroscientist</a></td></tr><tr><td><span class="tocsublinknumber">1.2<tt>&nbsp;</tt></span><a href="#%28part._.Lord_.Adrian_and_the_.All-or-.None_.Action_.Potential%29" class="tocsubseclink" data-pltdoc="x">Lord Adrian and the All-<wbr></wbr>or-<wbr></wbr>None Action Potential</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._sec~3aiandf%29" class="tocsubseclink" data-pltdoc="x">The Integrate and Fire Equation</a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Electronics_.Background%29" class="tocsubseclink" data-pltdoc="x">Electronics Background</a></td></tr><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Formula_.Discussion_.Questions%29" class="tocsubseclink" data-pltdoc="x">Formula Discussion Questions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><h2><a name="(part._.Integrate_and_.Fire_.Neuron)"></a>Integrate and Fire Neuron</h2><p>In this section we take a look at the history and math of the computational model of neuron firing called "Integrate and Fire" (I&amp;F).
 The I&amp;F model uses math essentially the same as the spring example.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Is the integrate and fire model used much in modeling in the present time.? <a href="https://scholar.google.com/scholar?as_ylo=2020&amp;q=%22integrate+and+fire%22+neuron&amp;hl=en&amp;as_sdt=7,39">Answer</a>.</p></blockquote></blockquote></blockquote><h3>1<tt>&nbsp;</tt><a name="(part._.History_of_the_.Integrate_and_.Fire_.Model)"></a>History of the Integrate and Fire Model</h3><h4>1.1<tt>&nbsp;</tt><a name="(part._.Louis_.Lapicque_-_.Earlier_.Computational_.Neuroscientist)"></a>Louis Lapicque - Earlier Computational Neuroscientist</h4><p><a href="https://link.springer.com/content/pdf/10.1007/s00422-007-0190-0.pdf">Modern Commentary on Lapique&rsquo;s Neuron Model</a></p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img src="Lapicque_laboratoire.png" alt="" width="321" height="500"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3alapique-lab))" x-target-lift="Figure"></a>Figure&nbsp;1: </span>The Lapique Lab at the Sorbonne 190something</span></p></blockquote><p><a href="http://www.snv.jussieu.fr/brette/papers/Lap07.pdf">Original Lapique Paper (scanned; pdf)</a>
<a href="https://fr.wikipedia.org/wiki/Louis_Lapicque">Brief Biographical Details of Lapicque</a>.</p><h4>1.2<tt>&nbsp;</tt><a name="(part._.Lord_.Adrian_and_the_.All-or-.None_.Action_.Potential)"></a>Lord Adrian and the All-or-None Action Potential</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>When was the Action Potential Demonstrated? What was the experimental animal used by Adrian? <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1420429/pdf/jphysiol01990-0084.pdf">Answer (pdf).</a></p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Want more details? There is an excellent free book available <a href="https://lcnwww.epfl.ch/gerstner/SPNM/SPNM.html"><span style="font-weight: bold">Spiking Neurons</span>.</a> They also have another more modern book out too <a href="http://neuronaldynamics.epfl.ch/online/index.html"><span style="font-weight: bold">Neuronal Dynamics</span>.</a></p></blockquote></blockquote></blockquote><h3>2<tt>&nbsp;</tt><a name="(part._sec~3aiandf)"></a>The Integrate and Fire Equation</h3><p><div class="math">\tau \frac{dV(t)}{dt} = -V(t) + R~I(t)\tag{1}</div></p><p><a href="#%28part._sec~3aiandf%29" data-pltdoc="x">The Integrate and Fire Equation</a></p><h3>3<tt>&nbsp;</tt><a name="(part._.Electronics_.Background)"></a>Electronics Background</h3><ol><li><p>What is Ohm&rsquo;s Law?</p></li><li><p>What is Kirchoff&rsquo;s Point Rule?</p></li><li><p>What is Capacitance?</p></li><li><p>What is the relation between current and capacitance?</p></li></ol><h4>3.1<tt>&nbsp;</tt><a name="(part._.Formula_.Discussion_.Questions)"></a>Formula Discussion Questions</h4><ol><li><p>What does <span class="math">\frac{dV}{dt}</span> mean?</p></li><li><p>What does <span class="math">\frac{1}{\tau}</span> mean?</p></li><li><p>Why does the voltage term on the right have a negative sign?</p></li><li><p>What is <span class="math">I(t)</span>?</p></li></ol><p>Put it all together</p><p>The voltage in the future will be a sum of whatever current is being added minus a function of the current voltage.</p><p>Why, if we don&rsquo;t reach a threshold to fire an action potential, do we see an exponential decay?</p><p>This is where you need to remember what came before. See that the change in voltage is proportional to itself. Solutions to these types of equations involve exponentials. Remember? But note the sign. It is negative. That is why it is an exponential decay instead of an exponential growth.</p><p>Deriving the IandF Equation
<div class="math">\begin{align*}
     I &amp;= I_R + I_C \\
       &amp;= I_R + C\frac{dV}{dt} \\
       &amp;= \frac{V}{R} + C\frac{dV}{dt}\\
     RI  &amp;= V + RC\frac{dV}{dt} \\
     \frac{1}{\tau}(RI-V)  &amp;= \frac{dV}{dt}\\
     \end{align*}</div></p><p><div class="SIntrapara">\subsection{Coding up the Integrate and Fire Neuron}
You will have as your main homework for this week to write a functioning version of this.
You can use my code as an example of what you are trying to implement if you get stuck on your own.
</div><div class="SIntrapara"><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Defining our parameters:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="hspace">&nbsp;</span><span class="RktVal">0.05</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">max-t</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-t</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">start-time</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">stop-time</span><span class="hspace">&nbsp;</span><span class="RktVal">6.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cap</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">threshold</span><span class="hspace">&nbsp;</span><span class="RktVal">3.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="hspace">&nbsp;</span><span class="RktVal">8.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-v</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">voltage</span><span class="hspace">&nbsp;</span><span class="RktSym">init-v</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-current</span><span class="hspace">&nbsp;</span><span class="RktVal">4.3</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">start-time</span><span class="hspace">&nbsp;</span><span class="RktSym">stop-time</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tau</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktSym">cap</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></div></p><p>This is a good habit to develop with your code.
Do not "hard code" in values for variables that you will have to write in multiple locations in a file.
It makes it hard to update and debug your code.
Give sensible and short names to things you will use in your code.
Then define values for those at the top of your code.
This gives you one place to look for explanations and reminders, and also gives you a place where when you make a single change it will propagate through your code.</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Euler&rsquo;s Method (again):</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update</span><span class="hspace">&nbsp;</span><span class="RktSym">old-value</span><span class="hspace">&nbsp;</span><span class="RktSym">rate-of-change</span><span class="hspace">&nbsp;</span><span class="RktSym">time-step</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">rate-of-change</span><span class="hspace">&nbsp;</span><span class="RktSym">time-step</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">old-value</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p>This is the same updating rule that we used in the spring example.
It is a rewriting of the definition of the derivative.
This is sometimes referred to as [[https://en.wikipedia.org/wiki/Euler_method][Euler&rsquo;s method]].</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Helper functions:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dv-dt</span><span class="hspace">&nbsp;</span><span class="RktSym">localres</span><span class="hspace">&nbsp;</span><span class="RktSym">locali</span><span class="hspace">&nbsp;</span><span class="RktSym">localv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">tau</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">localres</span><span class="hspace">&nbsp;</span><span class="RktSym">locali</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">localv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">between</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">#:lower</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">lower</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:upper</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">upper</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:if-true</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-current</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:if-false</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">if-false</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">lower</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">upper</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">voltage-choice</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-status</span><span class="hspace">&nbsp;</span><span class="RktPn">#:thr</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">thr</span><span class="hspace">&nbsp;</span><span class="RktSym">threshold</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:sd</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sd</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="hspace">&nbsp;</span><span class="RktSym">thr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-status</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">sd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">spike-status</span><span class="hspace">&nbsp;</span><span class="RktVal">#i0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p>Just as we were given the equation for a spring, here we are given the equation for the I&amp;F neuron, which we translate from math to code.
These are being defined as functions.
You can do the same in both Python and R, but will need a different keyword and syntax.</p><p>In addition, I create some smaller "helper" functions.
It would be possible to collapse all this into one big function, but that would be harder for me to understand, and harder for you to understand.
In general, try to write short little functions that do one thing.
Then you can chain those small functions together to accomplish the larger task.</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Running our model:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-iandf-sim</span><span class="hspace">&nbsp;</span><span class="RktPn">#:tolerance</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">tolerance</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-time</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">max-time</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-iter</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">max-iter</span><span class="hspace">&nbsp;</span><span class="RktVal">10000</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for*/fold</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">accum</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:result</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reverse</span><span class="hspace">&nbsp;</span><span class="RktSym">accum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-range</span><span class="hspace">&nbsp;</span><span class="RktSym">max-iter</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:break</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">max-time</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">spike</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">abs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tolerance</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">values</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">between</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">voltage-choice</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dv-dt</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">spike</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">accum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"./../code/iandf.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-iandf-sim</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-time</span><span class="hspace">&nbsp;</span><span class="RktVal">10.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">third</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p>Again, if you squint, you will see similarities to the Spring exercise.
Though things may look more complex here it is only because I have so many more /local/ variables to define.
The basic flow is still just a *loop*.
Each of those local variables gets a start value and then a rule for updating each time through the loop.
Later local variables can depend on the values of that came earlier in the list (that is the reason for the asterisk in =do*=).
The loop also has a test condition for when to quit (like a "while" loop), and what it should do when that condition is met.
Here it collects all the data into a big long list and reverses the order.
I was pushing the recent values on to the front of the list each time, but now I need to reverse it so that time flows as we expect.</p><p>Define variables, and even functions, where you need them.
It might be overkill here, but the idea is a good one to try and get in the habit of.
When you need a function or a variable for only a small part of your program, make them local.
Then they won&rsquo;t interfere with other parts of your program, and after you use them your programming language system can <span style="font-style: italic">garbage collect</span> them freeing up your computer&rsquo;s memory and your namespace.
Local variables, local functions, and even un-named, so-called <span style="font-style: italic">lambda</span> functions, can make your code easier to read and understand as things are defined where they are needed and used.
Defining local variables and functions does not require special keywords in Python and R, but can be inferred from the code itself.</p><p>Visualizations can be essential in helping you to see and understand the function of your computational program.
Gain a good familiarity and facility with the plotting functions of whatever programming language you plan to use.</p><p>In this function we can give a name to our plot and feed in the data it will use. In fact, I did not have to create and save the data. I was able to generate it internal to the function itself. This is sometimes thought of as function /composition/. You will also hear people talk of /chaining/ functions or /piping/. Think of how you can connect a series of pipes together to get a flow from beginning to end. In the case of a programming language each of the pipes may do something to what it is carrying and the result can be a processed data stream.</p><p><div class="SIntrapara">* Homework
</div><div class="SIntrapara"><ol><li><p>This weeks homework is to write a I&amp;F program that does what I just did. It should generate a "spike" when given a constant input. Be sure to look at my code to see how that spike is created. If you don&rsquo;t understand that you will have a hard time.</p></li><li><p>Related to the last point, does the I&amp;F neuron truly spike?</p></li><li><p><div class="SIntrapara">If (1) goes easy then here are some other things to try:
   </div><div class="SIntrapara"><ul><li><p>create a refractory period for your neuron.</p></li><li><p>give a noisy input rather than the single flat line I demonstrate.</p></li><li><p>Look at how many times your neuron spikes to constant input. Is that what a real neuron does (try searching for Mainin and Sejnowski)? Does that affect the utility of the I&amp;F model for computational neuroscience?</p></li><li><p>Lastly, if all that goes quickly, and it will for some of you, but not most of you, try creating variations of this simple I&amp;F model.</p></li></ul></div></p></li></ol></div></p><p>Upload your code to LEARN for credit.</p></div></div><div id="contextindicator">&nbsp;</div></body></html>