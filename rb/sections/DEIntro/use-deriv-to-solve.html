<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Using Derivatives to Solve Problems With a Computer</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {document.write('<scr' + 'ipt type="text/javascript" src="MathJax/MathJax.js?config=default"></scr' + 'ipt>');})();
</script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Models of Spiking Neurons and Differential Equations</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="An_Introduction_to_Differential_Equations.html" class="tocviewlink" data-pltdoc="x">An Introduction to Differential Equations</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Derivatives_are_Slopes.html" class="tocviewlink" data-pltdoc="x">Derivatives are Slopes</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Using Derivatives to Solve Problems With a Computer</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Using Derivatives to Solve Problems With a Computer</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.What_is_the_square_root_of_53_%29" class="tocviewlink" data-pltdoc="x">What is the square root of 53?</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Practice_.Simulating_.With_.D.Es%29" class="tocviewlink" data-pltdoc="x">Practice Simulating With DEs</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.What_is_the_square_root_of_53_%29" class="tocsubseclink" data-pltdoc="x">What is the square root of 53?</a></td></tr><tr><td><span class="tocsublinknumber">3.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Working_.Through_an_.Example%29" class="tocsubseclink" data-pltdoc="x">Working Through an Example</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Practice_.Simulating_.With_.D.Es%29" class="tocsubseclink" data-pltdoc="x">Practice Simulating With DEs</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Frictionless_.Springs%29" class="tocsubseclink" data-pltdoc="x">Frictionless Springs</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Derivatives_are_Slopes.html" title="backward to &quot;2 Derivatives are Slopes&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Models of Spiking Neurons and Differential Equations&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._use-deriv-to-solve)"></a>Using Derivatives to Solve Problems With a Computer</h3><h4>3.1<tt>&nbsp;</tt><a name="(part._.What_is_the_square_root_of_53_)"></a>What is the square root of 53?</h4><p>We want to know the value of <span class="math">x</span> that makes <span class="math">53 =x^2</span> true?</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">Always use the computer for the busy work when you can. Your computer can solve many mathematical problems for you. For example, requiring <span class="stt">symalg</span> we can programatically find that the derivative of <span class="math">x^2</span> is
<span class="math">2 x</span></span></span></span></p><ul><li><p>Come up with a guess.</p></li><li><p>Calculate the error.</p></li><li><p>Adjust your guess based on the error.</p></li><li><p>This adjustment will use the derivative.</p></li></ul><h5>3.1.1<tt>&nbsp;</tt><a name="(part._.Working_.Through_an_.Example)"></a>Working Through an Example</h5><p>Let&rsquo;s say we want to solve for <span class="math">x</span> when <span class="math">x^2 = 128</span>. How might we start? When in doubt, guess!</p><p>How much is your guess off?</p><p><div class="math">\mbox{Error} = \mbox{(my guess)}^2 - \mbox{128}</div></p><p>What we want to do now is adjust our guess. Since we know how much our function changes its output for each adjustment in the input, <span class="refelem"><span class="refcolumn"><span class="refcontent">How do we know this? Our derivative is a <span style="font-style: italic">rate of change</span>.</span></span></span> we can revise our guess based on this necessary adjustment. If we are still wrong, we just repeat the process.</p><p>To get there let us consider representing the ratio of how our function&rsquo;s output changes for changes in input. We can just make things concrete.</p><p><div class="math">\frac{\Delta~\mbox{output}}{\Delta~\mbox{input}} = \frac{\mbox{function(input_1)} - \mbox{function(input_0)}}{\mbox{input_1} - \mbox{input_0}}</div></p><p>If you take a look at the definition of the derivative above you will see the resemblance, except for the absence of the limit. When trying to solve this problem we don&rsquo;t initially know both inputs, but we do know that when we put in the solution to our problem we will get 128. And we also know that we can computer the derivative. A bit of rearranging and renaming give us.</p><p><div class="math">\Delta(guess) = \frac{\mbox{f(guess)} - 128}{\frac{\mbox{df}}{\mbox{dg}}|_{guess}}</div></p><p>What is square root of 128?</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">df</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">2.0</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update-guess</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expt</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">2.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">df</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-sqrt</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktVal">128.0</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktVal">7.0</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">tol</span><span class="hspace">&nbsp;</span><span class="RktVal">1e-6</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">udg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update-guess</span><span class="hspace">&nbsp;</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">current-guess</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktSym">udg</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">udg</span><span class="hspace">&nbsp;</span><span class="RktSym">tol</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">current-guess</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-sqrt</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktSym">current-guess</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"my-square-root.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">my-sqrt</span><span class="hspace">&nbsp;</span><span class="RktVal">55.0</span><span class="hspace">&nbsp;</span><span class="RktVal">4.0</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">7.536091549295775</span></p></td></tr></table></blockquote></div></p><ul><li><p>What is a <span class="stt">cube root</span>?</p></li><li><p>What is the derivative of <span class="math">x^3</span>?</p></li><li><p>Write a Racket program to computer the cube root of a give number.</p></li></ul><h4>3.2<tt>&nbsp;</tt><a name="(part._.Practice_.Simulating_.With_.D.Es)"></a>Practice Simulating With DEs</h4><h5>3.2.1<tt>&nbsp;</tt><a name="(part._.Frictionless_.Springs)"></a>Frictionless Springs</h5><p>We want to code neurons, but to get there we should feel comfortable with the underlying tool or we won&rsquo;t be able to adapt it or re-use it for some new purpose. I don&rsquo;t want to give you a fish. I want to teach you how to fish.</p><p>By working with an example simpler than a neuron, and one for which you might have more intuition, such as a simple spring or "slinky" I hope you will get a better /feel/ for how the numbers, equations, and code all relate. Then we can move on to the neuronal application.</p><p>The equation of a frictionless spring is:</p><p><div class="math">\frac{d^2 s}{dt^2} = -P~s</div>
where &rsquo;s&rsquo; refers to space, &rsquo;t&rsquo; refers to time, and &rsquo;P&rsquo; is a constant, often called the spring constant, that indicates how stiff or springy the spring is.</p><p>Imagine that we knew this derivative. It would tell us how much space the spring head would move for a given, very small, increment of time. We could then just add this to our current position to get the new position and repeat. This method of using a derivative to iterate forward is sometimes called the Euler method.</p><p>Returning to our definition of the derivative:</p><p><div class="math">\frac{s(t + \Delta t) - s(t)}{\Delta t} = velocity \approx \frac{d s}{d t}</div></p><p>But our spring equation is not given in terms of the velocity it is given in terms of the acceleration which is the second derivative. Therefore, to find our new position we need the velocity, but we only have the acceleration. However, if we knew the acceleration and the velocity we could use that to calculate the new velocity. Unfortunately we don&rsquo;t know the velocity, unless ... , maybe we could just assume something. Let&rsquo;s say it is zero because we have started our process where we have stretched the spring, and are holding it, just before letting it go.</p><p>How will our velocity change with time?</p><p><div class="math">\frac{v(t + \Delta t) - v(t)}{\Delta t} = acceleration \approx \frac{d v}{d t} = \frac{d^2 s}{d t^2}</div></p><p>And we have a formula for this. We can now bootstrap our simulation.</p><p>Note the similiarity of the two functions. You could write a helper function that was generic to this pattern of old value + rate of change times the  time step, and just used the pertinent values.</p><p>How do we know the formula for acceleration? We were given it \ref{eq:1}.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"spring.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">release-spring</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">third</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fourth</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_4.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p>NB: The code above creates a series of steps that happen one after the other. This is *not* a nested loop, though it will look similar to the nesting of loops you can see in python and R. This is just a common lisp idiosyncrasy. You will again need to use a loop. This time I am using what kind of loop? The ~collect~ statement is a short hand for gathering all my values up and returing them. You will probably need something like a =return= statement or a variable that you use to catch the updated values and append them on to a growning list.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Derivatives_are_Slopes.html" title="backward to &quot;2 Derivatives are Slopes&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Models of Spiking Neurons and Differential Equations&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>