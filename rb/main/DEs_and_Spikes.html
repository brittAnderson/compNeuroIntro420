<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>3&nbsp;Differential Equations and Spiking Neuron Models</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="figure.css" title="default"/><link rel="stylesheet" type="text/css" href="scribble-style.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript">
(function() {document.write('<scr' + 'ipt type="text/javascript" src="MathJax/MathJax.js?config=default"></scr' + 'ipt>');})();
</script><script type="text/javascript" src="figure.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Computational Modeling for Psychology</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Introductory_Material.html" class="tocviewlink" data-pltdoc="x">Introduction and Computing Requirements</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Computation_and_Cognition.html" class="tocviewlink" data-pltdoc="x">What is Computation and is Cognition Computable?</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Differential Equations and Spiking Neuron Models</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>3&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Differential Equations and Spiking Neuron Models</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">3.1&nbsp;</td><td><a href="#%28part._.Differential_.Equations_and_.Spiking_.Neuron_.Models%29" class="tocviewlink" data-pltdoc="x">Differential Equations and Spiking Neuron Models</a></td></tr><tr><td align="right">3.2&nbsp;</td><td><a href="#%28part._.Integrate_and_.Fire_.Neuron%29" class="tocviewlink" data-pltdoc="x">Integrate and Fire Neuron</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">3.1<tt>&nbsp;</tt></span><a href="#%28part._.Differential_.Equations_and_.Spiking_.Neuron_.Models%29" class="tocsubseclink" data-pltdoc="x">Differential Equations and Spiking Neuron Models</a></td></tr><tr><td><span class="tocsublinknumber">3.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Spiking._.Neuron._.Models%29" class="tocsubseclink" data-pltdoc="x">Goals</a></td></tr><tr><td><span class="tocsublinknumber">3.1.2<tt>&nbsp;</tt></span><a href="#%28part._.The_.Action_.Potential_-_a_very_short_review%29" class="tocsubseclink" data-pltdoc="x">The Action Potential -<wbr></wbr> a very short review</a></td></tr><tr><td><span class="tocsublinknumber">3.1.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Multiple_.Ways_to_.Say_the_.Same_.Thing%29" class="tocsubseclink" data-pltdoc="x">Multiple Ways to Say the Same Thing</a></td></tr><tr><td><span class="tocsublinknumber">3.1.3<tt>&nbsp;</tt></span><a href="#%28part._.Derivatives_are_.Slopes%29" class="tocsubseclink" data-pltdoc="x">Derivatives are Slopes</a></td></tr><tr><td><span class="tocsublinknumber">3.1.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Use_your_computer_as_a_tool_for_exploration%29" class="tocsubseclink" data-pltdoc="x">Use your computer as a tool for exploration</a></td></tr><tr><td><span class="tocsublinknumber">3.1.4<tt>&nbsp;</tt></span><a href="#%28part._use-deriv-to-solve%29" class="tocsubseclink" data-pltdoc="x">Using Derivatives to Solve Problems With a Computer</a></td></tr><tr><td><span class="tocsublinknumber">3.1.4.1<tt>&nbsp;</tt></span><a href="#%28part._.What_is_the_square_root_of_128_%29" class="tocsubseclink" data-pltdoc="x">What is the square root of 128?</a></td></tr><tr><td><span class="tocsublinknumber">3.1.4.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Working_.Through_an_.Example%29" class="tocsubseclink" data-pltdoc="x">Working Through an Example</a></td></tr><tr><td><span class="tocsublinknumber">3.1.4.2<tt>&nbsp;</tt></span><a href="#%28part._.Homework__.Computing_the_.Cube_.Root%29" class="tocsubseclink" data-pltdoc="x">Homework:<span class="mywbr"> &nbsp;</span> Computing the Cube Root</a></td></tr><tr><td><span class="tocsublinknumber">3.1.5<tt>&nbsp;</tt></span><a href="#%28part._.Practice_.Simulating_.With_.D.Es%29" class="tocsubseclink" data-pltdoc="x">Practice Simulating With DEs</a></td></tr><tr><td><span class="tocsublinknumber">3.1.5.1<tt>&nbsp;</tt></span><a href="#%28part._.Frictionless_.Springs%29" class="tocsubseclink" data-pltdoc="x">Frictionless Springs</a></td></tr><tr><td><span class="tocsublinknumber">3.1.5.2<tt>&nbsp;</tt></span><a href="#%28part._.Damped_.Oscillators%29" class="tocsubseclink" data-pltdoc="x">Damped Oscillators</a></td></tr><tr><td><span class="tocsublinknumber">3.2<tt>&nbsp;</tt></span><a href="#%28part._.Integrate_and_.Fire_.Neuron%29" class="tocsubseclink" data-pltdoc="x">Integrate and Fire Neuron</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1<tt>&nbsp;</tt></span><a href="#%28part._.History_of_the_.Integrate_and_.Fire_.Model%29" class="tocsubseclink" data-pltdoc="x">History of the Integrate and Fire Model</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1.1<tt>&nbsp;</tt></span><a href="#%28part._.Louis_.Lapicque_-_.Earlier_.Computational_.Neuroscientist%29" class="tocsubseclink" data-pltdoc="x">Louis Lapicque -<wbr></wbr> Earlier Computational Neuroscientist</a></td></tr><tr><td><span class="tocsublinknumber">3.2.1.2<tt>&nbsp;</tt></span><a href="#%28part._.Lord_.Adrian_and_the_.All-or-.None_.Action_.Potential%29" class="tocsubseclink" data-pltdoc="x">Lord Adrian and the All-<wbr></wbr>or-<wbr></wbr>None Action Potential</a></td></tr><tr><td><span class="tocsublinknumber">3.2.2<tt>&nbsp;</tt></span><a href="#%28part._sec~3aiandf%29" class="tocsubseclink" data-pltdoc="x">The Integrate and Fire Equation</a></td></tr><tr><td><span class="tocsublinknumber">3.2.3<tt>&nbsp;</tt></span><a href="#%28part._.Electronics_.Background%29" class="tocsubseclink" data-pltdoc="x">Electronics Background</a></td></tr><tr><td><span class="tocsublinknumber">3.2.3.1<tt>&nbsp;</tt></span><a href="#%28part._.Formula_.Discussion_.Questions%29" class="tocsubseclink" data-pltdoc="x">Formula Discussion Questions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Computation_and_Cognition.html" title="backward to &quot;2 What is Computation and is Cognition Computable?&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Computational Modeling for Psychology&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>3<tt>&nbsp;</tt><a name="(part._.D.Es._and._.Spikes)"></a>Differential Equations and Spiking Neuron Models</h3><h4>3.1<tt>&nbsp;</tt><a name="(part._.Differential_.Equations_and_.Spiking_.Neuron_.Models)"></a>Differential Equations and Spiking Neuron Models</h4><h5>3.1.1<tt>&nbsp;</tt><a name="(part._.Spiking._.Neuron._.Models)"></a>Goals</h5><p>Why are Differential Equations an important technique for computational modelling in psychology and neuroscience?</p><p>Work on the modeling of the action potential eventually resulted in <a href="https://www.nobelprize.org/prizes/medicine/1963/summary/">Nobel Prizes</a>. The Hodgkin-Huxley equations that resulted from this work are differential equations. Subsequent models, even very marked simplifications such as the Integrate and Fire model, are also differential equations. When you rely on a simulation software that allows you to create populations of such neurons you are using, at least indirectly, a differential equation. It is worth knowing what they are.</p><p><div class="SIntrapara">Beyond that, the idea of a differential equation is a very intuitive and useful notion. You can recast the example of the <a href="Computation_and_Cognition.html#%28part._forgetting%29" data-pltdoc="x">What Is Cognition?</a> forgetting curve as a differential equation in which the change in the strength of a memory over time is proportional to the current strength of the memory  as a function of time. </div><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Exponentials show up a lot in neuroscience and psychology. When you see a rate of change in a quantity that is proportional to the magnitude of that quantity there is an exponential hidden in there somewhere.</p></blockquote></blockquote></blockquote></div></p><p>Further, modern computers and their powers mean that we can often use differential equations in our models by naively implementing their effects as a series of very tiny steps. We might gain insight if we knew more about how to solve differential equations analytically, but often, if our goals our practical, that is running a simulation to see the result, we can be ignorant of differential equations at that level, and just deploy them as another practical tool. Just like you can now use software to implement Monte Carlo simulations in statistics without knowing the full details of the theory mathematically.</p><p>This gives us the following goals for this section:</p><ol><li><p>Learn what a Differential Equation is as a mathematical entity,</p></li><li><p>Get an intuition for differential equations by thinking of them as slopes,</p></li><li><p>Learn how they emerge as a natural effort to account for changing quantities in neuroscience and psychology,</p></li><li><p>Put this altogether by writing programs to implement the integrate and fire point neuron model and a version of the Hodgkin-Huxley neuron model.</p></li></ol><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>In preparation for things to come you might try to remember (or look up) what is the integral of one over x? In symbols, what is <span class="math">\int \frac{1}{x}~ dx</span>?</p></blockquote></blockquote></blockquote><h5>3.1.2<tt>&nbsp;</tt><a name="(part._.The_.Action_.Potential_-_a_very_short_review)"></a>The Action Potential - a very short review</h5><p>Our goal is to use differential equations in code written to simulate spiking neurons. Therefore, we ought to remind ourselves about the basics of what is a neuronal action potential.</p><p><div class="SIntrapara">Give yourself 10 minutes to brush up on what an action potential is. First, try and draw an action potential:
</div><div class="SIntrapara"><ul><li><p>What are the axes?</p></li><li><p>What ion causes the upward deflection?</p></li><li><p>What causes the repolarization?</p></li><li><p>Who discovered the action potential?</p></li><li><p>Who won the Nobel Prize for characterizing the ionic events of the action potential experimentally and building a mathematical model?</p></li></ul></div></p><p>Did you draw     <a href="https://commons.wikimedia.org/w/index.php?curid=44114666">this</a>?</p><p><span style="font-weight: bold">An aside: Notation</span></p><p>Mathematics is full of notation. And one person&rsquo;s notation is another person&rsquo;s jargon. The key thing is not to let yourself be scared off. Often the motivation for mathematical notation is just convenience: condensing something that would take a long time to say or write into an abbreviated form. It is the equivalent of saying "meh" or "lol".  Mathematical notation is just a technical emoji. You probably know the mathematical idea that is being represented; you just don&rsquo;t know the abbreviation that is being used. So, just like you can teach granma the meaning of TMI you can with a little bit of practice get used to the Greek symbols that appear so often in mathematical presentations.</p><p>As a first exercise, write out in long hand what is meant by the
following:</p><p><div class="math">\sum_{\forall x \in \left\{ 1 , 2 , 3 \right \}} x ~=~ 6</div></p><p>Did you write: <a href="../sections/notation-answer.txt">this?</a></p><h5>3.1.2.1<tt>&nbsp;</tt><a name="(part._.Multiple_.Ways_to_.Say_the_.Same_.Thing)"></a>Multiple Ways to Say the Same Thing</h5><p>Another thing to note about mathematical notation is that it often provides more than one way to say the same thing. Which notation is used depends on context and the technical community the work is intended for. Computer scientists frequently use <span class="stt">i</span> as a variable for indexing a loop. To the mathematician it is the complex part of an imaginary number <span class="math">i~=~\sqrt{-1}</span>, but engineers use <span class="stt">j</span> instead. Here are some of the many different ways you may see the derivative depicted.</p><p>Leibniz notation: <span class="math">\frac{dx}{dt}</span></p><p>Physicists often use this for derivatives with respect to time (<span class="stt">t</span>): <span class="math">\dot{x}</span></p><p>Mathematicians often use the variable itself as a representation for the function and use the number of "primes" to indicate how many derivatives to take: <span class="math">x&rsquo;</span></p><p>Or they may make the variable representing the function explicit if they think that will make their reasoning clearer in the present context: <span class="math">f&rsquo;(x)</span></p><p>This is called operator notation. You won&rsquo;t see it as much, but when doing certain kinds of proofs or reasoning more abstractly it can be much more convenient: <span class="math">D~f</span></p><h5>3.1.3<tt>&nbsp;</tt><a name="(part._.Derivatives_are_.Slopes)"></a>Derivatives are Slopes</h5><p>There may be many ways to write out the notation for a derivative, but the uniting concept behind them is as "rates of change." They are essentially just the slopes you learned about in secondary school. The old "rise over run" where the length of the run is made very, very small.</p><p>You might want to pause here and make sure you remember what a slope is.</p><p><div class="SIntrapara"><ul><li><p>Can you write the equation to find the slope of a line?</p></li><li><p>How would you apply this to a curve and not a line?</p></li><li><p>When in doubt return to definition. What is the definition of a slope of a function?</p></li></ul></div><div class="SIntrapara">We will see momentarily how to go from our basic understanding of the slope of a line to <span style="font-weight: bold">generalize</span> it to also include curves. This notion of generalizing is often a key step in developing an idea for modeling.</div></p><h5>3.1.3.1<tt>&nbsp;</tt><a name="(part._.Use_your_computer_as_a_tool_for_exploration)"></a>Use your computer as a tool for exploration</h5><p>Demonstrating something mathematically can give a great deal of satisfaction and ultimately is the guarantor of whether something is correct. Often we want to know more than whether something is correct in the abstract, we want to see specific examples. Sometimes pencil and paper are the best approach, but often we can do the same thing more quickly and more extensively by using our computer. Let&rsquo;s digress to use our computer for visualizing ideas about slopes. You should try to get these to work in Dr. Racket.</p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">5</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">6</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">vector</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktSym">ys</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:title</span><span class="hspace">&nbsp;</span><span class="RktVal">"A Line: What is it's slope?"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_2.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Example:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">function</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expt</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">function</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lambda</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">12</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">16</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:title</span><span class="hspace">&nbsp;</span><span class="RktVal">"A curve (of what?) showing the slope at a point."</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_3.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_4.png" alt="image" width="406" height="406"/></p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Derivatives are Instantaneous Slopes</p></blockquote></blockquote></blockquote><p>These plots are intended to demonstrate the idea that locally everything is linear. If you calculate the slope for your curve exactly like you do for a line you will get something that starts to look more and more like a line the smaller your "run" gets. The idea is that you pick two points that are "close enough" and your derivative becomes "close enough." At least with a computer. Mathematically, you just keep going to the limit.</p><blockquote class="SCentered"><p><span style="font-weight: bold">Definition of the Derivative</span><br/><span class="math">\frac{df}{dx} = \lim_{h \to 0}\frac{f(x + h) - f(x)}{(x + h) - x}</span></p></blockquote><h5>3.1.4<tt>&nbsp;</tt><a name="(part._use-deriv-to-solve)"></a>Using Derivatives to Solve Problems With a Computer</h5><h5>3.1.4.1<tt>&nbsp;</tt><a name="(part._.What_is_the_square_root_of_128_)"></a>What is the square root of 128?</h5><p>We want to know the value of <span class="math">x</span> that makes <span class="math">128 =x^2</span> true?</p><p><span class="refelem"><span class="refcolumn"><span class="refcontent">Always use the computer for the busy work when you can. Your computer can solve many mathematical problems for you. For example, requiring <span class="stt">symalg</span> we can programatically find that the derivative of <span class="math">x^2</span> is
<span class="math">2 x</span>. Look at the code for this <span class="stt">margin-note</span> and you will see how I computed that with racket (and then typeset it).</span></span></span></p><ul><li><p>Come up with a guess.</p></li><li><p>Calculate the error.</p></li><li><p>Adjust your guess based on the error.</p></li><li><p>This adjustment will use the derivative.</p></li></ul><h5>3.1.4.1.1<tt>&nbsp;</tt><a name="(part._.Working_.Through_an_.Example)"></a>Working Through an Example</h5><p>Let&rsquo;s say we want to solve for <span class="math">x</span> when <span class="math">x^2 = 128</span>. How might we start? When in doubt, guess!</p><p>How much is your guess off?</p><p><div class="math">\mbox{Error} = \mbox{(my guess)}^2 - \mbox{128}</div></p><p>What we want to do now is adjust our guess. Since we know how much our function changes its output for each adjustment in the input, <span class="refelem"><span class="refcolumn"><span class="refcontent">How do we know this? Our derivative is a <span style="font-style: italic">rate of change</span>.</span></span></span> we can revise our guess based on this necessary adjustment. If we are still wrong, we just repeat the process.</p><p>To get there let us consider representing the ratio of how our function&rsquo;s output changes for changes in input. We can just make things concrete.</p><p><div class="math">\frac{\Delta~\mbox{output}}{\Delta~\mbox{input}} = \frac{\mbox{function(input_1)} - \mbox{function(input_0)}}{\mbox{input_1} - \mbox{input_0}}</div></p><p>If you take a look at the definition of the derivative above you will see the resemblance, except for the absence of the limit. When trying to solve this problem we don&rsquo;t initially know both inputs, but we do know that when we put in the solution to our problem we will get 128. And we also know that we can compute the derivative. A bit of rearranging and renaming give us.<span class="refelem"><span class="refcolumn"><span class="refcontent">Can you map the steps I took to get this equation from the one above?</span></span></span></p><p><div class="math">\Delta(guess) = \frac{\mbox{f(guess)} - 128}{\frac{\mbox{df}}{\mbox{dg}}|_{guess}}</div></p><p>What is square root of 128?</p><p><div class="SIntrapara">A function to compute the square root</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">df</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktVal">2.0</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update-guess</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expt</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="hspace">&nbsp;</span><span class="RktVal">2.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">df</span><span class="hspace">&nbsp;</span><span class="RktSym">g</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-sqrt</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktVal">128.0</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktVal">7.0</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">tol</span><span class="hspace">&nbsp;</span><span class="RktVal">1e-6</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">udg</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update-guess</span><span class="hspace">&nbsp;</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">current-guess</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">guess</span><span class="hspace">&nbsp;</span><span class="RktSym">udg</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktSym">udg</span><span class="hspace">&nbsp;</span><span class="RktSym">tol</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">current-guess</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-sqrt</span><span class="hspace">&nbsp;</span><span class="RktSym">target</span><span class="hspace">&nbsp;</span><span class="RktSym">current-guess</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p><table cellspacing="0" cellpadding="0" class="SVerbatim"><tr><td><p><span class="stt">11.38357546408394</span></p></td></tr></table></p><h5>3.1.4.2<tt>&nbsp;</tt><a name="(part._.Homework__.Computing_the_.Cube_.Root)"></a>Homework: Computing the Cube Root</h5><ul><li><p>What is a <span class="stt">cube root</span>?</p></li><li><p>What is the derivative of <span class="math">x^3</span>?</p></li><li><p>Write a Racket program to computer the cube root of a give number.</p></li></ul><h5>3.1.5<tt>&nbsp;</tt><a name="(part._.Practice_.Simulating_.With_.D.Es)"></a>Practice Simulating With DEs</h5><h5>3.1.5.1<tt>&nbsp;</tt><a name="(part._.Frictionless_.Springs)"></a>Frictionless Springs</h5><p>We want to code neurons, but to get there we should feel comfortable with the underlying tool or we won&rsquo;t be able to adapt it or re-use it for some new purpose. I don&rsquo;t want to give you a fish. I want to teach you how to fish.</p><p>By working with an example simpler than a neuron, and one for which you might have more intuition, such as a simple spring or "slinky", I hope you will get a better <span style="font-style: italic">feel</span> for how the numbers, equations, and code all relate. Then we can move on to the neuronal application.</p><p>The equation of a frictionless spring is:</p><p><a name="(elem._eqn1)"></a>
<div class="math">\frac{d^2 s}{dt^2} = -P~s\tag{1}</div>
<br/></p><p>where &rsquo;s&rsquo; refers to space, &rsquo;t&rsquo; refers to time, and &rsquo;P&rsquo; is a constant, often called the spring constant, that indicates how stiff or springy the spring is.</p><p>Imagine that we knew this derivative. It would tell us how much space the spring head would move for a given, very small, increment of time. We could then just add this to our current position to get the new position and repeat. This method of using a derivative to iterate forward is sometimes called the Euler method.</p><p>Returning to our definition of the derivative:</p><p><div class="math">\frac{s(t + \Delta t) - s(t)}{\Delta t} = velocity \approx \frac{d s}{d t}</div></p><p>But our spring equation is not given in terms of the velocity it is given in terms of the acceleration which is the second derivative. Therefore, to find our new position we need the velocity, but we only have the acceleration. However, if we knew the acceleration and the velocity we could use that to calculate the new velocity. Unfortunately we don&rsquo;t know the velocity, unless ... , maybe we could just assume something. Let&rsquo;s say it is zero because we have started our process where we have stretched the spring, and are holding it, just before letting it go.</p><p>How will our velocity change with time?</p><p><div class="math">\frac{v(t + \Delta t) - v(t)}{\Delta t} = acceleration \approx \frac{d v}{d t} = \frac{d^2 s}{d t^2}</div></p><p>And we have a formula for this. We can now bootstrap our simulation.</p><p>Note the similiarity of the two functions. You could write a helper function that was generic to this pattern of old value + rate of change times the  time step, and just used the pertinent values.</p><p>How do we know the formula for acceleration? We were given it in <a href="#%28elem._eqn1%29" data-pltdoc="x">Equation 1</a> above.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"./code/spring.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">release-spring</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">fourth</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">third</span><span class="hspace">&nbsp;</span><span class="RktSym">spring-results</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_5.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p>IAMHERE</p><h5>3.1.5.2<tt>&nbsp;</tt><a name="(part._.Damped_.Oscillators)"></a>Damped Oscillators</h5><p>Provide the code for the damped oscillator. It has the formula of</p><p><div class="math">\frac{d^2 s}{dt^2} = -P~s(t) - k~v(t)</div></p><p>This should really only need to change a couple of lines to update the model to be able to handle the damped version as well. You might want to edit <a href="./../code/spring.rkt">spring.rkt</a>.</p><h4>3.2<tt>&nbsp;</tt><a name="(part._.Integrate_and_.Fire_.Neuron)"></a>Integrate and Fire Neuron</h4><p>In this section we take a look at the history and math of the computational model of neuron firing called "Integrate and Fire" (I&amp;F).
 The I&amp;F model uses math essentially the same as the spring example.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Is the integrate and fire model used much in modeling in the present time.? <a href="https://scholar.google.com/scholar?as_ylo=2020&amp;q=%22integrate+and+fire%22+neuron&amp;hl=en&amp;as_sdt=7,39">Answer</a>.</p></blockquote></blockquote></blockquote><h5>3.2.1<tt>&nbsp;</tt><a name="(part._.History_of_the_.Integrate_and_.Fire_.Model)"></a>History of the Integrate and Fire Model</h5><h5>3.2.1.1<tt>&nbsp;</tt><a name="(part._.Louis_.Lapicque_-_.Earlier_.Computational_.Neuroscientist)"></a>Louis Lapicque - Earlier Computational Neuroscientist</h5><p><a href="https://link.springer.com/content/pdf/10.1007/s00422-007-0190-0.pdf">Modern Commentary on Lapique&rsquo;s Neuron Model</a></p><blockquote class="Figure"><blockquote class="Centerfigure"><blockquote class="FigureInside"><p><img src="Lapicque_laboratoire.png" alt="" width="321" height="500"/></p></blockquote></blockquote><p class="Centertext"><span class="Legend"><span class="FigureTarget"><a name="(counter._(figure._fig~3alapique-lab))" x-target-lift="Figure"></a>Figure&nbsp;4: </span>The Lapique Lab at the Sorbonne 190something</span></p></blockquote><p><a href="http://www.snv.jussieu.fr/brette/papers/Lap07.pdf">Original Lapique Paper (scanned; pdf)</a>
<a href="https://fr.wikipedia.org/wiki/Louis_Lapicque">Brief Biographical Details of Lapicque</a>.</p><h5>3.2.1.2<tt>&nbsp;</tt><a name="(part._.Lord_.Adrian_and_the_.All-or-.None_.Action_.Potential)"></a>Lord Adrian and the All-or-None Action Potential</h5><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>When was the Action Potential Demonstrated? What was the experimental animal used by Adrian? <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC1420429/pdf/jphysiol01990-0084.pdf">Answer (pdf).</a></p></blockquote></blockquote></blockquote><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Want more details? There is an excellent free book available <a href="https://lcnwww.epfl.ch/gerstner/SPNM/SPNM.html"><span style="font-weight: bold">Spiking Neurons</span>.</a> They also have another more modern book out too <a href="http://neuronaldynamics.epfl.ch/online/index.html"><span style="font-weight: bold">Neuronal Dynamics</span>.</a></p></blockquote></blockquote></blockquote><h5>3.2.2<tt>&nbsp;</tt><a name="(part._sec~3aiandf)"></a>The Integrate and Fire Equation</h5><p><div class="math">\tau \frac{dV(t)}{dt} = -V(t) + R~I(t)\tag{1}</div></p><p><a href="#%28part._sec~3aiandf%29" data-pltdoc="x">The Integrate and Fire Equation</a></p><h5>3.2.3<tt>&nbsp;</tt><a name="(part._.Electronics_.Background)"></a>Electronics Background</h5><ol><li><p>What is Ohm&rsquo;s Law?</p></li><li><p>What is Kirchoff&rsquo;s Point Rule?</p></li><li><p>What is Capacitance?</p></li><li><p>What is the relation between current and capacitance?</p></li></ol><h5>3.2.3.1<tt>&nbsp;</tt><a name="(part._.Formula_.Discussion_.Questions)"></a>Formula Discussion Questions</h5><ol><li><p>What does <span class="math">\frac{dV}{dt}</span> mean?</p></li><li><p>What does <span class="math">\frac{1}{\tau}</span> mean?</p></li><li><p>Why does the voltage term on the right have a negative sign?</p></li><li><p>What is <span class="math">I(t)</span>?</p></li></ol><p>Put it all together</p><p>The voltage in the future will be a sum of whatever current is being added minus a function of the current voltage.</p><p>Why, if we don&rsquo;t reach a threshold to fire an action potential, do we see an exponential decay?</p><p>This is where you need to remember what came before. See that the change in voltage is proportional to itself. Solutions to these types of equations involve exponentials. Remember? But note the sign. It is negative. That is why it is an exponential decay instead of an exponential growth.</p><p>Deriving the IandF Equation
<div class="math">\begin{align*}
     I &amp;= I_R + I_C \\
       &amp;= I_R + C\frac{dV}{dt} \\
       &amp;= \frac{V}{R} + C\frac{dV}{dt}\\
     RI  &amp;= V + RC\frac{dV}{dt} \\
     \frac{1}{\tau}(RI-V)  &amp;= \frac{dV}{dt}\\
     \end{align*}</div></p><p><div class="SIntrapara">\subsection{Coding up the Integrate and Fire Neuron}
You will have as your main homework for this week to write a functioning version of this.
You can use my code as an example of what you are trying to implement if you get stuck on your own.
</div><div class="SIntrapara"><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Defining our parameters:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="hspace">&nbsp;</span><span class="RktVal">0.05</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">max-t</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-t</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">start-time</span><span class="hspace">&nbsp;</span><span class="RktVal">1.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">stop-time</span><span class="hspace">&nbsp;</span><span class="RktVal">6.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">cap</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">threshold</span><span class="hspace">&nbsp;</span><span class="RktVal">3.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="hspace">&nbsp;</span><span class="RktVal">8.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">init-v</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">voltage</span><span class="hspace">&nbsp;</span><span class="RktSym">init-v</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-current</span><span class="hspace">&nbsp;</span><span class="RktVal">4.3</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktSym">start-time</span><span class="hspace">&nbsp;</span><span class="RktSym">stop-time</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">tau</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktSym">cap</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p></div></p><p>This is a good habit to develop with your code.
Do not "hard code" in values for variables that you will have to write in multiple locations in a file.
It makes it hard to update and debug your code.
Give sensible and short names to things you will use in your code.
Then define values for those at the top of your code.
This gives you one place to look for explanations and reminders, and also gives you a place where when you make a single change it will propagate through your code.</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Euler&rsquo;s Method (again):</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update</span><span class="hspace">&nbsp;</span><span class="RktSym">old-value</span><span class="hspace">&nbsp;</span><span class="RktSym">rate-of-change</span><span class="hspace">&nbsp;</span><span class="RktSym">time-step</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">rate-of-change</span><span class="hspace">&nbsp;</span><span class="RktSym">time-step</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">old-value</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p>This is the same updating rule that we used in the spring example.
It is a rewriting of the definition of the derivative.
This is sometimes referred to as [[https://en.wikipedia.org/wiki/Euler_method][Euler&rsquo;s method]].</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Helper functions:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dv-dt</span><span class="hspace">&nbsp;</span><span class="RktSym">localres</span><span class="hspace">&nbsp;</span><span class="RktSym">locali</span><span class="hspace">&nbsp;</span><span class="RktSym">localv</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">/</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">tau</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">*</span><span class="hspace">&nbsp;</span><span class="RktSym">localres</span><span class="hspace">&nbsp;</span><span class="RktSym">locali</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">localv</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">between</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">#:lower</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">lower</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">car</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:upper</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">upper</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cdr</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-time</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:if-true</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">injection-current</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:if-false</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">if-false</span><span class="hspace">&nbsp;</span><span class="RktVal">0.0</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">if</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">lower</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;=</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">upper</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">if-true</span><span class="hspace">&nbsp;</span><span class="RktSym">if-false</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">voltage-choice</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-status</span><span class="hspace">&nbsp;</span><span class="RktPn">#:thr</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">thr</span><span class="hspace">&nbsp;</span><span class="RktSym">threshold</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:sd</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">sd</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cond</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">and</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="hspace">&nbsp;</span><span class="RktSym">thr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">not</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-status</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">sd</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">spike-status</span><span class="hspace">&nbsp;</span><span class="RktVal">#i0.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVal">#t</span><span class="hspace">&nbsp;</span><span class="RktSym">curr-volt</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p>Just as we were given the equation for a spring, here we are given the equation for the I&amp;F neuron, which we translate from math to code.
These are being defined as functions.
You can do the same in both Python and R, but will need a different keyword and syntax.</p><p>In addition, I create some smaller "helper" functions.
It would be possible to collapse all this into one big function, but that would be harder for me to understand, and harder for you to understand.
In general, try to write short little functions that do one thing.
Then you can chain those small functions together to accomplish the larger task.</p><p><div class="SIntrapara"><span style="font-weight: bold"><span style="font-style: italic">Running our model:</span></span></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-iandf-sim</span><span class="hspace">&nbsp;</span><span class="RktPn">#:tolerance</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">tolerance</span><span class="hspace">&nbsp;</span><span class="RktVal">0.1</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-time</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">max-time</span><span class="hspace">&nbsp;</span><span class="RktVal">10</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-iter</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">max-iter</span><span class="hspace">&nbsp;</span><span class="RktVal">10000</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">for*/fold</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">accum</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:result</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">reverse</span><span class="hspace">&nbsp;</span><span class="RktSym">accum</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">in-range</span><span class="hspace">&nbsp;</span><span class="RktSym">max-iter</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:break</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&gt;</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">max-time</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">let</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">spike</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&lt;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">abs</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-</span></span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">spike-display</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">tolerance</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">values</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">+</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">between</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">voltage-choice</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">update</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">dv-dt</span><span class="hspace">&nbsp;</span><span class="RktSym">res</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">dt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">spike</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cons</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">list</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">accum</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">require</span><span class="hspace">&nbsp;</span><span class="RktVal">"./code/iandf.rkt"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">begin</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">define</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">run-iandf-sim</span><span class="hspace">&nbsp;</span><span class="RktPn">#:max-time</span><span class="hspace">&nbsp;</span><span class="RktVal">10.0</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">plot</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">lines</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">vector</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">first</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">map</span><span class="hspace">&nbsp;</span><span class="RktSym">third</span><span class="hspace">&nbsp;</span><span class="RktSym">iandf-results</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img style="vertical-align: 0px; margin: -3px -3px -3px -3px;" src="pict_6.png" alt="image" width="406" height="406"/></p></td></tr></table></blockquote></div></p><p>Again, if you squint, you will see similarities to the Spring exercise.
Though things may look more complex here it is only because I have so many more /local/ variables to define.
The basic flow is still just a *loop*.
Each of those local variables gets a start value and then a rule for updating each time through the loop.
Later local variables can depend on the values of that came earlier in the list (that is the reason for the asterisk in =do*=).
The loop also has a test condition for when to quit (like a "while" loop), and what it should do when that condition is met.
Here it collects all the data into a big long list and reverses the order.
I was pushing the recent values on to the front of the list each time, but now I need to reverse it so that time flows as we expect.</p><p>Define variables, and even functions, where you need them.
It might be overkill here, but the idea is a good one to try and get in the habit of.
When you need a function or a variable for only a small part of your program, make them local.
Then they won&rsquo;t interfere with other parts of your program, and after you use them your programming language system can <span style="font-style: italic">garbage collect</span> them freeing up your computer&rsquo;s memory and your namespace.
Local variables, local functions, and even un-named, so-called <span style="font-style: italic">lambda</span> functions, can make your code easier to read and understand as things are defined where they are needed and used.
Defining local variables and functions does not require special keywords in Python and R, but can be inferred from the code itself.</p><p>Visualizations can be essential in helping you to see and understand the function of your computational program.
Gain a good familiarity and facility with the plotting functions of whatever programming language you plan to use.</p><p>In this function we can give a name to our plot and feed in the data it will use. In fact, I did not have to create and save the data. I was able to generate it internal to the function itself. This is sometimes thought of as function /composition/. You will also hear people talk of /chaining/ functions or /piping/. Think of how you can connect a series of pipes together to get a flow from beginning to end. In the case of a programming language each of the pipes may do something to what it is carrying and the result can be a processed data stream.</p><p><div class="SIntrapara">* Homework
</div><div class="SIntrapara"><ol><li><p>This weeks homework is to write a I&amp;F program that does what I just did. It should generate a "spike" when given a constant input. Be sure to look at my code to see how that spike is created. If you don&rsquo;t understand that you will have a hard time.</p></li><li><p>Related to the last point, does the I&amp;F neuron truly spike?</p></li><li><p><div class="SIntrapara">If (1) goes easy then here are some other things to try:
   </div><div class="SIntrapara"><ul><li><p>create a refractory period for your neuron.</p></li><li><p>give a noisy input rather than the single flat line I demonstrate.</p></li><li><p>Look at how many times your neuron spikes to constant input. Is that what a real neuron does (try searching for Mainin and Sejnowski)? Does that affect the utility of the I&amp;F model for computational neuroscience?</p></li><li><p>Lastly, if all that goes quickly, and it will for some of you, but not most of you, try creating variations of this simple I&amp;F model.</p></li></ul></div></p></li></ol></div></p><p>Upload your code to LEARN for credit.</p><div class="navsetbottom"><span class="navleft"><div class="nosearchform"></div>&nbsp;&nbsp;<span class="tocsettoggle">&nbsp;&nbsp;<a href="javascript:void(0);" title="show/hide table of contents" onclick="TocsetToggle();">contents</a></span></span><span class="navright">&nbsp;&nbsp;<a href="Computation_and_Cognition.html" title="backward to &quot;2 What is Computation and is Cognition Computable?&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Computational Modeling for Psychology&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>